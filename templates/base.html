<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ShadowPixel{% endblock %} - AI-Powered Resume Analysis</title>
    <meta name="description" content="{% block description %}Transform your resume with intelligent GitHub profile analysis and AI-powered insights using ShadowPixel{% endblock %}">
    <meta name="keywords" content="{% block keywords %}resume, AI, GitHub, analysis, ShadowPixel, career, job search{% endblock %}">
    <meta name="author" content="ShadowPixel">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="{% block og_title %}ShadowPixel - AI Resume Analysis{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Transform your resume with intelligent GitHub profile analysis{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <meta property="og:image" content="{% static 'images/og-image.png' %}">
    <meta property="og:site_name" content="ShadowPixel">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% block twitter_title %}ShadowPixel - AI Resume Analysis{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}Transform your resume with AI-powered insights{% endblock %}">
    <meta name="twitter:image" content="{% static 'images/twitter-card.png' %}">
    
    <!-- Load Django static files -->
    {% load static %}
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/x-icon" href="{% static 'favicon.ico' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static 'site.webmanifest' %}">
    <meta name="theme-color" content="#00ff88">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    {% block extra_css %}{% endblock %}
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "ShadowPixel",
        "description": "AI-powered resume analysis and GitHub profile integration",
        "url": "{{ request.build_absolute_uri:'/' }}",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Web",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
    
    {% block extra_head %}{% endblock %}
</head>
<body class="{% block body_class %}{% endblock %}">
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Animated background particles -->
    <div class="particle-field" aria-hidden="true">
        <div class="particle" style="top: 20%; left: 10%; width: 3px; height: 3px; animation-delay: 0s;"></div>
        <div class="particle" style="top: 50%; left: 80%; width: 4px; height: 4px; animation-delay: 2s;"></div>
        <div class="particle" style="top: 80%; left: 30%; width: 2px; height: 2px; animation-delay: 4s;"></div>
        <div class="particle" style="top: 30%; left: 70%; width: 3px; height: 3px; animation-delay: 1s;"></div>
        <div class="particle" style="top: 70%; left: 50%; width: 3px; height: 3px; animation-delay: 3s;"></div>
    </div>

    <!-- Geometric background shapes -->
    <div class="geometric-bg" aria-hidden="true">
        <div class="geo-shape"></div>
        <div class="geo-shape"></div>
        <div class="geo-shape"></div>
    </div>

    <!-- Header/Navigation -->
    <header class="site-header">
        <nav class="nav-header" role="navigation" aria-label="Main navigation">
            <div class="nav-brand">
                <a href="{% url 'resume:index' %}" class="brand-link" aria-label="ShadowPixel Home">
                    <span class="brand-icon" aria-hidden="true">üöÄ</span>
                    <span class="brand-text">ShadowPixel</span>
                </a>
            </div>
            
            <!-- Mobile menu button -->
            <button class="mobile-menu-btn" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="nav-menu">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
            
            <div class="nav-actions" id="nav-menu">
                <a href="{% url 'resume:index' %}" class="nav-btn {% if request.resolver_match.url_name == 'index' %}active{% endif %}">
                    <span class="nav-icon" aria-hidden="true">üè†</span>
                    <span>Home</span>
                </a>
                <a href="{% url 'resume:upload_resume' %}" class="nav-btn {% if request.resolver_match.url_name == 'upload_resume' %}active{% endif %}">
                    <span class="nav-icon" aria-hidden="true">üì§</span>
                    <span>Upload</span>
                </a>
                <a href="{% url 'resume:uploaded_resumes' %}" class="nav-btn {% if request.resolver_match.url_name == 'uploaded_resumes' %}active{% endif %}">
                    <span class="nav-icon" aria-hidden="true">üìÑ</span>
                    <span>Resumes</span>
                </a>
                <a href="{% url 'resume:statistics' %}" class="nav-btn {% if request.resolver_match.url_name == 'statistics' %}active{% endif %}">
                    <span class="nav-icon" aria-hidden="true">üìä</span>
                    <span>Stats</span>
                </a>
                {% comment %}
                <a href="{% url 'resume:help' %}" class="nav-btn {% if request.resolver_match.url_name == 'help' %}active{% endif %}">
                    <span class="nav-icon" aria-hidden="true">‚ùì</span>
                    <span>Help</span>
                </a>
                {% endcomment %}
            </div>
        </nav>
    </header>

    <!-- Main content area -->
    <main id="main-content" class="site-main" role="main">
        <!-- Breadcrumb navigation -->
        {% block breadcrumb %}
        {% if breadcrumb_items %}
        <nav class="breadcrumb" aria-label="Breadcrumb">
            <ol class="breadcrumb-list">
                {% for item in breadcrumb_items %}
                <li class="breadcrumb-item">
                    {% if item.url %}
                        <a href="{{ item.url }}">{{ item.name }}</a>
                    {% else %}
                        <span aria-current="page">{{ item.name }}</span>
                    {% endif %}
                </li>
                {% endfor %}
            </ol>
        </nav>
        {% endif %}
        {% endblock %}
        
        <!-- Flash messages -->
        {% if messages %}
        <div class="messages-container" role="alert" aria-live="polite">
            {% for message in messages %}
            <div class="message message-{{ message.tags }}">
                <span class="message-icon" aria-hidden="true">
                    {% if message.tags == 'success' %}‚úÖ
                    {% elif message.tags == 'error' %}‚ùå
                    {% elif message.tags == 'warning' %}‚ö†Ô∏è
                    {% else %}‚ÑπÔ∏è{% endif %}
                </span>
                <span class="message-text">{{ message }}</span>
                <button class="message-close" aria-label="Close message" onclick="this.parentElement.remove()">
                    <span aria-hidden="true">√ó</span>
                </button>
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <!-- Page content -->
        {% block content %}
        <div class="hero-container">
            <div class="hero-content">
                <div class="status-badge">
                    üöÄ AI-Powered Resume Analysis
                </div>
                <h1 class="main-title">ShadowPixel</h1>
                <p class="hero-subtitle">
                    Transform your resume with intelligent GitHub profile analysis and AI-powered insights
                </p>
                <div class="action-buttons">
                    <a href="{% url 'resume:upload_resume' %}" class="btn-primary">
                        <span>üì§</span> Upload Resume
                    </a>
                    <a href="{% url 'resume:uploaded_resumes' %}" class="btn-secondary">
                        <span>üìã</span> Browse Resumes
                    </a>
                </div>
            </div>
        </div>
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer class="site-footer" role="contentinfo">
        <div class="footer-content">
            <div class="footer-section">
                <h3 class="footer-title">ShadowPixel</h3>
                <p class="footer-description">
                    AI-powered resume analysis and GitHub profile integration for modern professionals.
                </p>
                <div class="footer-social">
                    <a href="#" class="social-link" aria-label="Follow us on Twitter">
                        <span aria-hidden="true">üê¶</span>
                    </a>
                    <a href="#" class="social-link" aria-label="Connect on LinkedIn">
                        <span aria-hidden="true">üíº</span>
                    </a>
                    <a href="#" class="social-link" aria-label="View on GitHub">
                        <span aria-hidden="true">üê±</span>
                    </a>
                </div>
            </div>
            
            <div class="footer-section">
                <h4 class="footer-subtitle">Quick Links</h4>
                <ul class="footer-links">
                    <li><a href="{% url 'resume:index' %}">Home</a></li>
                    <li><a href="{% url 'resume:upload_resume' %}">Upload Resume</a></li>
                    <li><a href="{% url 'resume:uploaded_resumes' %}">Browse Resumes</a></li>
                    <li><a href="{% url 'resume:statistics' %}">Statistics</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4 class="footer-subtitle">Support</h4>
                <ul class="footer-links">
                    <li><a href="#" onclick="showContactModal()">Contact Us</a></li>
                    <li><a href="#" onclick="showPrivacyModal()">Privacy Policy</a></li>
                    <li><a href="#" onclick="showTermsModal()">Terms of Service</a></li>
                    <li><a href="#" onclick="showFeedbackModal()">Feedback</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4 class="footer-subtitle">Stay Updated</h4>
                <p class="footer-newsletter-text">Get the latest updates and features</p>
                <form class="newsletter-form" onsubmit="handleNewsletterSignup(event)">
                    <input type="email" placeholder="Enter your email" class="newsletter-input" required>
                    <button type="submit" class="newsletter-btn">
                        <span aria-hidden="true">üìß</span>
                        <span class="sr-only">Subscribe</span>
                    </button>
                </form>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p class="footer-copyright">
                &copy; 2025 ShadowPixel. All rights reserved.
                <span class="footer-version">v{% block version %}1.0.0{% endblock %}</span>
            </p>
            <div class="footer-meta">
                <span class="footer-status">
                    <span class="status-indicator" aria-hidden="true"></span>
                    All systems operational
                </span>
            </div>
        </div>
    </footer>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay" aria-hidden="true">
        <div class="loading-spinner">
            <div class="spinner-ring"></div>
            <div class="spinner-ring"></div>
            <div class="spinner-ring"></div>
        </div>
        <p class="loading-text">Processing...</p>
    </div>

    <!-- Toast notifications container -->
    <div class="toast-container" id="toastContainer" aria-live="polite" aria-atomic="true"></div>

    <!-- JavaScript -->
    <script>
        // Mobile menu toggle
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            const navMenu = document.getElementById('nav-menu');
            
            if (mobileMenuBtn && navMenu) {
                mobileMenuBtn.addEventListener('click', function() {
                    const isExpanded = this.getAttribute('aria-expanded') === 'true';
                    this.setAttribute('aria-expanded', !isExpanded);
                    navMenu.classList.toggle('active');
                });
            }

            // Add particles dynamically
            createParticles();
            
            // Initialize tooltips and other interactive elements
            initializeInteractiveElements();
            
            // Set up keyboard navigation
            setupKeyboardNavigation();
        });

        // Create dynamic particles
        function createParticles() {
            const particleField = document.querySelector('.particle-field');
            if (!particleField) return;
            
            const particleCount = 15;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.width = (Math.random() * 4 + 1) + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 6) + 's';
                particleField.appendChild(particle);
            }
        }

        // Toast notification system
        function showToast(message, type = 'info', duration = 5000) {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            
            const icons = {
                success: '‚úÖ',
                error: '‚ùå',
                warning: '‚ö†Ô∏è',
                info: '‚ÑπÔ∏è'
            };
            
            toast.innerHTML = `
                <span class="toast-icon" aria-hidden="true">${icons[type] || icons.info}</span>
                <span class="toast-message">${message}</span>
                <button class="toast-close" onclick="removeToast(this)" aria-label="Close notification">
                    <span aria-hidden="true">√ó</span>
                </button>
            `;
            
            container.appendChild(toast);
            
            // Show toast
            setTimeout(() => toast.classList.add('show'), 100);
            
            // Auto remove
            setTimeout(() => removeToast(toast.querySelector('.toast-close')), duration);
        }

        function removeToast(closeBtn) {
            const toast = closeBtn.parentElement;
            toast.classList.remove('show');
            setTimeout(() => toast.remove(), 300);
        }

        // Loading overlay
        function showLoading(text = 'Processing...') {
            const overlay = document.getElementById('loadingOverlay');
            const loadingText = overlay.querySelector('.loading-text');
            loadingText.textContent = text;
            overlay.style.display = 'flex';
            overlay.setAttribute('aria-hidden', 'false');
        }

        function hideLoading() {
            const overlay = document.getElementById('loadingOverlay');
            overlay.style.display = 'none';
            overlay.setAttribute('aria-hidden', 'true');
        }

        // Modal functions (placeholders)
        function showContactModal() { showToast('Contact modal would open here', 'info'); }
        function showPrivacyModal() { showToast('Privacy policy modal would open here', 'info'); }
        function showTermsModal() { showToast('Terms of service modal would open here', 'info'); }
        function showFeedbackModal() { showToast('Feedback modal would open here', 'info'); }

        // Newsletter signup
        function handleNewsletterSignup(event) {
            event.preventDefault();
            const email = event.target.querySelector('input[type="email"]').value;
            showToast('Thank you for subscribing!', 'success');
            event.target.reset();
        }

        // Initialize interactive elements
        function initializeInteractiveElements() {
            // Add smooth scrolling to anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });
        }

        // Keyboard navigation setup
        function setupKeyboardNavigation() {
            document.addEventListener('keydown', function(e) {
                // ESC key closes modals/menus
                if (e.key === 'Escape') {
                    const activeMenu = document.querySelector('.nav-actions.active');
                    if (activeMenu) {
                        activeMenu.classList.remove('active');
                        document.querySelector('.mobile-menu-btn').setAttribute('aria-expanded', 'false');
                    }
                }
                
                // Ctrl/Cmd + K for quick navigation
                if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                    e.preventDefault();
                    showToast('Quick navigation shortcut pressed', 'info');
                }
            });
        }

        // Error handling
        window.addEventListener('error', function(e) {
            console.error('Global error:', e.error);
            showToast('An error occurred. Please try again.', 'error');
        });

        // Performance monitoring
        window.addEventListener('load', function() {
            if ('performance' in window && 'measure' in performance) {
                setTimeout(() => {
                    const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                    console.log(`Page load time: ${loadTime}ms`);
                }, 0);
            }
        });
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
