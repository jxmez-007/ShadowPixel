<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistics - ShadowPixel</title>
    <meta name="description" content="View resume processing statistics on ShadowPixel">
    
    {% load static %}
    <link rel="icon" type="image/x-icon" href="{% static 'favicon.ico' %}">
    <link rel="stylesheet" href="{% static 'css/statistics.css' %}">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Background Particles -->
    <div class="particle-field"></div>
    
    <!-- Navigation with Mobile Toggle -->
    <nav class="navigation" aria-label="Main navigation">
        <!-- Hamburger Toggle Button -->
        <button class="menu-toggle" aria-label="Toggle navigation" aria-expanded="false">
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </button>
        
        <!-- Navigation Menu -->
        <ul class="nav-menu">
            <li><a href="{% url 'resume:index' %}">Home</a></li>
            <li><a href="{% url 'resume:upload_resume' %}">Upload</a></li>
            <li><a href="{% url 'resume:uploaded_resumes' %}">Resumes</a></li>
            <li><a href="{% url 'resume:statistics' %}" class="active">Stats</a></li>
            <li><a href="{% url 'resume:help' %}">Help</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="hero-container">
        <div class="hero-content">
            <h1 class="main-title">Statistics</h1>
            
            <div class="upload-section">
                <div class="form-card">
                    <h2>System Statistics</h2>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>{{ stats.total_resumes|default:0 }}</h3>
                            <p>Total Resumes</p>
                        </div>
                        
                        <div class="stat-card">
                            <h3>{{ stats.completed_processing|default:0 }}</h3>
                            <p>Completed</p>
                        </div>
                        
                        <div class="stat-card">
                            <h3>{{ stats.pending_processing|default:0 }}</h3>
                            <p>Pending</p>
                        </div>
                        
                        <div class="stat-card">
                            <h3>{{ stats.failed_processing|default:0 }}</h3>
                            <p>Failed</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Generate animated particles
            const particleField = document.querySelector('.particle-field');
            if (particleField) {
                for(let i = 0; i < 20; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.position = 'fixed';
                    particle.style.top = `${Math.random() * 100}%`;
                    particle.style.left = `${Math.random() * 100}%`;
                    
                    const size = Math.random() * 6 + 2;
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    particle.style.animationDelay = `${Math.random() * 6}s`;
                    particle.style.zIndex = '-1';
                    
                    particleField.appendChild(particle);
                }
            }

            // Mobile Menu Toggle Functionality
            const menuToggle = document.querySelector('.menu-toggle');
            const navMenu = document.querySelector('.nav-menu');
            
            if (menuToggle && navMenu) {
                menuToggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const isExpanded = this.getAttribute('aria-expanded') === 'true';
                    this.setAttribute('aria-expanded', !isExpanded);
                    this.classList.toggle('active');
                    navMenu.classList.toggle('active');
                    
                    if (navMenu.classList.contains('active')) {
                        document.body.style.overflow = 'hidden';
                    } else {
                        document.body.style.overflow = '';
                    }
                });
                
                const navLinks = navMenu.querySelectorAll('a');
                navLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        menuToggle.classList.remove('active');
                        navMenu.classList.remove('active');
                        menuToggle.setAttribute('aria-expanded', 'false');
                        document.body.style.overflow = '';
                    });
                });
                
                document.addEventListener('click', function(event) {
                    const isClickInsideMenu = navMenu.contains(event.target);
                    const isClickOnToggle = menuToggle.contains(event.target);
                    
                    if (!isClickInsideMenu && !isClickOnToggle && navMenu.classList.contains('active')) {
                        menuToggle.classList.remove('active');
                        navMenu.classList.remove('active');
                        menuToggle.setAttribute('aria-expanded', 'false');
                        document.body.style.overflow = '';
                    }
                });
                
                document.addEventListener('keydown', function(event) {
                    if (event.key === 'Escape' && navMenu.classList.contains('active')) {
                        menuToggle.classList.remove('active');
                        navMenu.classList.remove('active');
                        menuToggle.setAttribute('aria-expanded', 'false');
                        document.body.style.overflow = '';
                    }
                });
            }

            // Animate stat cards on load
            const statCards = document.querySelectorAll('.stat-card');
            statCards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 300 + (index * 100));
            });
        });
    </script>
</body>
</html>
